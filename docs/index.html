<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a1a2e">
    <title>ุนุฏุงุฏ ุงููููุจููุณ ุดุฑุงูุฉ</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- ุดุงุดุฉ ุงูุชุฑุญูุจ -->
        <div id="welcome-screen" class="screen active">
            <div class="screen-content">
                <div class="cards-display">
                    <span class="card-symbol spade">โ</span>
                    <span class="card-symbol heart">โฅ</span>
                    <span class="card-symbol diamond">โฆ</span>
                    <span class="card-symbol club">โฃ</span>
                </div>
                <h1 class="title">ุนุฏุงุฏ ุงููููุจููุณ ุดุฑุงูุฉ</h1>
                
                <div class="input-group">
                    <label>ุงุณู ุงููุฑูู ุงูุฃูู</label>
                    <input type="text" id="team1-name" placeholder="ูุฑูููุง">
                </div>
                
                <div class="input-group">
                    <label>ุงุณู ุงููุฑูู ุงูุซุงูู</label>
                    <input type="text" id="team2-name" placeholder="ุงูุฎุตู">
                </div>
                
                <button class="btn btn-success" onclick="startNewGame()">ุจุฏุก ูุนุจุฉ ุฌุฏูุฏุฉ</button>
                <button class="btn btn-primary" onclick="continueGame()">ุงุณุชููุงู ูุนุจุฉ ุณุงุจูุฉ</button>
            </div>
        </div>

        <!-- ุดุงุดุฉ ุงููุนุจุฉ ุงูุฑุฆูุณูุฉ -->
        <div id="game-screen" class="screen">
            <div class="screen-content">
                <div class="score-header">
                    <div class="team-score">
                        <span class="team-name" id="game-team1-name">ูุฑูููุง</span>
                        <span class="score" id="team1-score">0</span>
                    </div>
                    <div class="vs">VS</div>
                    <div class="team-score">
                        <span class="team-name" id="game-team2-name">ุงูุฎุตู</span>
                        <span class="score" id="team2-score">0</span>
                    </div>
                </div>
                
                <div class="round-info">
                    <span>ุงูุฌููุฉ: <strong id="round-number">0</strong></span>
                </div>
                
                <div class="game-buttons">
                    <button class="btn btn-success btn-large" onclick="startRound()">
                        ๐ด ุจุฏุก ุฌููุฉ ุฌุฏูุฏุฉ
                    </button>
                    <button class="btn btn-primary" onclick="startCameraRound()">
                        ๐ท ุชุตููุฑ ุงูุฃููุงุช
                    </button>
                    <button class="btn btn-secondary" onclick="showHistory()">
                        ๐ ุณุฌู ุงูุฌููุงุช
                    </button>
                    <button class="btn btn-secondary" onclick="showSettings()">
                        โ๏ธ ุฅุนุฏุงุฏุงุช API
                    </button>
                    <button class="btn btn-danger" onclick="confirmNewGame()">
                        ๐ ูุนุจุฉ ุฌุฏูุฏุฉ
                    </button>
                </div>
            </div>
        </div>

        <!-- ุดุงุดุฉ ุงูุนุฏ -->
        <div id="counting-screen" class="screen">
            <div class="screen-content">
                <h2>ุฃุฏุฎู ูุชูุฌุฉ ูุฑููู</h2>
                
                <div class="counter-section">
                    <label>ุนุฏุฏ ุงูุฃููุงุช</label>
                    <div class="counter">
                        <button class="counter-btn" onclick="changeValue('tricks', -1)">โ</button>
                        <span id="tricks-value">0</span>
                        <button class="counter-btn" onclick="changeValue('tricks', 1)">+</button>
                    </div>
                </div>
                
                <div class="counter-section">
                    <label>ุนุฏุฏ ุงูุฏููุงุฑู โฆ</label>
                    <div class="counter">
                        <button class="counter-btn" onclick="changeValue('diamonds', -1)">โ</button>
                        <span id="diamonds-value">0</span>
                        <button class="counter-btn" onclick="changeValue('diamonds', 1)">+</button>
                    </div>
                </div>
                
                <div class="cards-selection">
                    <label>ุงูุจูุงุช</label>
                    <div class="card-buttons">
                        <button class="card-btn" data-card="queen-spade" onclick="toggleCard(this)">
                            <span class="card-rank">Q</span>
                            <span class="suit spade">โ</span>
                        </button>
                        <button class="card-btn" data-card="queen-heart" onclick="toggleCard(this)">
                            <span class="card-rank">Q</span>
                            <span class="suit heart">โฅ</span>
                        </button>
                        <button class="card-btn" data-card="queen-diamond" onclick="toggleCard(this)">
                            <span class="card-rank">Q</span>
                            <span class="suit diamond">โฆ</span>
                        </button>
                        <button class="card-btn" data-card="queen-club" onclick="toggleCard(this)">
                            <span class="card-rank">Q</span>
                            <span class="suit club">โฃ</span>
                        </button>
                    </div>
                </div>
                
                <div class="cards-selection">
                    <label>ุดูุฎ ุงููุจุฉ</label>
                    <div class="card-buttons single">
                        <button class="card-btn king-btn" data-card="king-heart" onclick="toggleCard(this)">
                            <span class="card-rank">K</span>
                            <span class="suit heart">โฅ</span>
                        </button>
                    </div>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-success" onclick="goToDoubling()">ุงูุชุงูู โ</button>
                    <button class="btn btn-secondary" onclick="goToScreen('game-screen')">ุฑุฌูุน</button>
                </div>
            </div>
        </div>

        <!-- ุดุงุดุฉ ุงูุชุฏุจูู -->
        <div id="doubling-screen" class="screen">
            <div class="screen-content">
                <h2>ุงูุชุฏุจูู</h2>
                
                <div class="doubling-section" id="opponent-doubled-section">
                    <h3>ุจุทุงูุงุช ุฏุจูููุง ุนููู ุงูุฎุตู</h3>
                    <p class="hint">ุงุฎุชุฑ ุงูุจุทุงูุงุช ุงูุชู ุฃุฎุฐุชูุง ููุงูุช ูุฏุจููุฉ ุนููู</p>
                    <div class="card-buttons" id="opponent-doubled-cards">
                        <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                    </div>
                </div>
                
                <div class="doubling-section" id="my-doubled-section">
                    <h3>ุจุทุงูุงุช ุฏุจููุชูุง ุฃูุช ุนูู ุงูุฎุตู</h3>
                    <p class="hint">ุงุฎุชุฑ ุงูุจุทุงูุงุช ุงูุชู ุฏุจููุชูุง ูุฃุฎุฐูุง ุงูุฎุตู</p>
                    <div class="card-buttons" id="my-doubled-cards">
                        <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                    </div>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-success" onclick="calculateAndFinish()">ุงุญุณุจ ุงููุชูุฌุฉ</button>
                    <button class="btn btn-secondary" onclick="goToScreen('counting-screen')">ุฑุฌูุน</button>
                </div>
            </div>
        </div>

        <!-- ุดุงุดุฉ ุงูุณุฌู -->
        <div id="history-screen" class="screen">
            <div class="screen-content">
                <h2>ุณุฌู ุงูุฌููุงุช</h2>
                
                <div class="history-table" id="history-table">
                    <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                </div>
                
                <div class="total-summary" id="total-summary"></div>
                
                <button class="btn btn-primary" onclick="goToScreen('game-screen')">ุฑุฌูุน</button>
            </div>
        </div>

        <!-- ุดุงุดุฉ ุงููุงููุฑุง -->
        <div id="camera-screen" class="screen">
            <div class="screen-content">
                <h2>๐ท ุชุตููุฑ ุงูุฃููุงุช</h2>
                
                <div class="camera-container">
                    <video id="camera-preview" autoplay playsinline></video>
                    <canvas id="camera-canvas" style="display:none;"></canvas>
                    <img id="captured-image" style="display:none;">
                </div>
                
                <div class="camera-controls">
                    <button class="btn btn-primary btn-large" id="capture-btn" onclick="capturePhoto()">
                        ๐ธ ุงูุชูุงุท ุตูุฑุฉ
                    </button>
                    <button class="btn btn-success" id="analyze-btn" style="display:none;" onclick="analyzeImage()">
                        ๐ ุชุญููู ุงูุจุทุงูุงุช
                    </button>
                    <button class="btn btn-secondary" id="retake-btn" style="display:none;" onclick="retakePhoto()">
                        ๐ ุฅุนุงุฏุฉ ุงูุชูุงุท
                    </button>
                </div>
                
                <div class="detection-results" id="detection-results" style="display:none;">
                    <h3>ุงูุจุทุงูุงุช ุงูููุชุดูุฉ:</h3>
                    <div id="detected-cards-list"></div>
                </div>
                
                <div class="camera-info">
                    <p>๐ก ูุฌูู ุงููุงููุฑุง ูุญู ุงูุจุทุงูุงุช ุนูู ุงูุทุงููุฉ</p>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-success" id="use-results-btn" style="display:none;" onclick="useDetectionResults()">
                        โ ุงุณุชุฎุฏู ุงููุชุงุฆุฌ
                    </button>
                    <button class="btn btn-secondary" onclick="closeCameraAndReturn()">ุฑุฌูุน</button>
                </div>
            </div>
        </div>

        <!-- ุดุงุดุฉ ุงูุฅุนุฏุงุฏุงุช -->
        <div id="settings-screen" class="screen">
            <div class="screen-content">
                <h2>โ๏ธ ุฅุนุฏุงุฏุงุช API</h2>
                
                <div class="settings-section">
                    <p class="info-text">
                        ููุชุนุฑู ุนูู ุงูุจุทุงูุงุช ุชููุงุฆูุงูุ ุชุญุชุงุฌ ููุชุงุญ API ูู Roboflow
                    </p>
                    
                    <div class="input-group">
                        <label>ููุชุงุญ API</label>
                        <input type="password" id="api-key-input" placeholder="ุฃุฏุฎู ููุชุงุญ API ุงูุฎุงุต ุจู">
                    </div>
                    
                    <div class="api-info">
                        <h4>ููู ุชุญุตู ุนูู ุงูููุชุงุญุ</h4>
                        <ol>
                            <li>ุณุฌูู ุญุณุงุจ ูุฌุงูู ูู <a href="https://roboflow.com" target="_blank">roboflow.com</a></li>
                            <li>ุงุฐูุจ ุฅูู Settings โ API Keys</li>
                            <li>ุงูุณุฎ ุงูููุชุงุญ ูุฃูุตูู ููุง</li>
                        </ol>
                        <p class="note">ุงูุญุณุงุจ ุงููุฌุงูู ูุชูุญ 1000 ุตูุฑุฉ ุดูุฑูุงู</p>
                    </div>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-success" onclick="saveApiKey()">๐พ ุญูุธ</button>
                    <button class="btn btn-secondary" onclick="goToScreen('game-screen')">ุฑุฌูุน</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
